openapi: 3.0.2
contact:
  email: support@iudx.org.in
  name: For support contact IUDX team at
schemes:
  - "http"
  - "https"

produces:
  - "application/json"
  - "text/plain"

consumes:
  - "application/json"
  - "text/plain"
info:
  version: 1.0.0
  title: DX Data Marketplace APIs
  description: |-
    # Introduction
    The data marketplace is Data Exchange (DX) platform that enables data Providers to host their datasets as a product. Likewise, data consumers can buy the products listed by various providers
  contact:
    name: For support contact IUDX Team at
    email: support@iudx.org.in
    url: https://iudx.org.in/
paths:
  /provider/product:
    post:
      tags:
        - Product
      summary: ''
      description: |-
        Create a product where the body contains the name and the array of resources that will be part of the product. 
        The name cannot be updated once the product is created as it is a unique identifier for a product of a provider. 
        The name is stored as a URN(for eg: a product named flood-sensors hosted by the provider with id 4efde16f-96cd-4b86-b6ee-ca5102413ff6 is represented as urn:datakaveri.org:4efde16f-96cd-4b86-b6ee-ca5102413ff6:flood-sensors)
      

      operationId: Create Product
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/exampleProductPostBody'
            examples:
              Create product body:
                value:
                  productId: flood-sensors
                  resourceIds:
                    - e3e940d9-5743-4229-bd9b-d7c2c80264bf
                    - 9c2df357-4d3b-46fd-9d24-3248867eb77e
      responses:
        '201':
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/successResponseWithObjects'
              examples:
                Create product success:
                  value:
                    type: 'urn:dx:dmp:Sucess'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:a4c27f3f-2524-4a84-816e-91f9ab23f837:testProduct'
                    detail: Product created successfully
        '400':
          description: invalid document
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Invalid productID:
                  value:
                    type: 'urn:dx:dmp:InvalidProductIDValue'
                    title: Bad request
                    detail: 'Invalid ProductID [ abc&23? ]'
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
              examples:
                Unauthorized:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidAuthorizationToken",
                      "title": "Not Authorized",
                      "detail": "Not Authorized"
                    }
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Unauthorized:
                  value:
                    {
                      "type": "urn:dx:dmp:resourceAlreadyExists",
                      "title": "Conflict",
                      "detail": "Document of given id already exists"
                    }
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/createProductForbiddenResponse'
              examples:
                account not activated:
                  value:
                    type: 'urn:dx:dmp:forbidden'
                    title: Product creation is forbidden
                    detail: To activate linked account please complete the KYC, filling account information etc., in your Razorpay merchant dashboard

    delete:
      tags:
        - Product
      summary: ''
      operationId: Delete Product
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: productId
          in: query
          description: urn name of the product
          required: true
          schema:
            type: string
            pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
            minLength: 36
            maxLength: 36
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/successResponseForDeleteProduct'
        '400':
          description: invalid document or product deleted previously
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Invalid productID:
                  value:
                    type: 'urn:dx:dmp:invalidId'
                    title: Bad request
                    detail: 'Given ID is invalid [ datakaveri.org/b8bd3e3f39615c8ec96722131ae95056b5938f2f ]'

                Product deleted previously:
                  value:
                    {
                      "type": "urn:dx:dmp:badRequest",
                      "title": "bad request parameter",
                      "detail": "Product cannot be deleted, as it was deleted previously"
                    }
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Unauthorized:
                  value:
                    type: 'urn:dx:dmp:invalidAuthorizationToken'
                    title: Not Authorized
                    detail: Not Authorized
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Unauthorized:
                  value:
                    type: 'urn:dx:dmp:resourceNotFound'
                    title: Not Found
                    detail: Document of given id does not exist
  /provider/list/products:
    get:
      tags:
        - Product
      operationId: List Products
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: resourceId
          in: query
          description: 'If resource ID is provided for listing, then products are filtered to show products only for that resource'
          required: false
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        productId:
                          type: string
                        providerName:
                          type: string
                        updatedAt:
                          type: string
                          minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                        resourceServerUrl:
                            type: string
                            minLength: 1
                        resources:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                              name:
                                type: string
                            required:
                              - id
                              - name
                      required:
                        - productId
                        - providerName
                        - updatedAt
                        - createdAt
                        - resourceServerUrl
                        - resources
                required:
                  - type
                  - title
                  - results
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2024-02-16T04:51:15.239497'
                        createdAt: '2024-01-16T04:51:15.239497'
                        resourceServerUrl: 'rs.iudx.io'
                        resources:
                          - id: 2d043bdb-fc62-4650-8426-dc72492cd621
                            name: TEST ITEM FOR APD /verify TESTS
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct5ui'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2024-01-16T04:51:15.239497'
                        resources:
                          - id: b58da193-23d9-43eb-b98a-a103d4b6103c
                            name: FW055 Environment-UUID
              examples:
                List All Products:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2024-02-16T04:51:15.239497'
                        createdAt: '2024-02-16T04:51:15.239497'
                        resourceServerUrl: 'rs.iudx.io'
                        resources:
                          - id: 2d043bdb-fc62-4650-8426-dc72492cd621
                            name: TEST ITEM FOR APD /verify TESTS
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct5ui'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2023-12-16T04:51:15.239497'
                        createdAt: '2023-11-16T04:51:15.239497'
                        resourceServerUrl: 'rs.iudx.io'
                        resources:
                          - id: b58da193-23d9-43eb-b98a-a103d4b6103c
                            name: FW055 Environment-UUID
                List Products for Resource:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2022-02-16T04:51:15.239497'
                        createdAt: '2022-02-16T04:51:15.239497'
                        resourceServerUrl: 'rs.iudx.io'
                        resources:
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
        '204':
          description: no content
        '400':
          description: invalid document
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Invalid ID:
                  value:
                    type: 'urn:dx:dmp:invalidId'
                    title: Bad request
                    detail: Given ID is invalid [ abcd ]
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Unauthorized:
                  value:
                    type: 'urn:dx:dmp:invalidAuthorizationToken'
                    title: Not Authorized
                    detail: Not Authorized
  /provider/list/purchases:
    get:
      tags:
        - Purchase
      operationId: List Purchases
      description: |-
        Lists consumer information [id, email, name], provider information [id, email, name],
        product information [product and variant id, name, resources with constraints, expiry and price],
        along with purchase related information [orderId, invoiceId, payment status and time].
        Expiry at field would be displayed when the payment status is `SUCCEEDED`.
        </br>
        The response could be also be filtered based on productId or resourceId.

      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: productId
          in: query
          description: purchases based on productId. Specifying this is optional
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
            required: false
        - name: resourceId
          in: query
          description: purchases based on resourceId. Specifying this is optional
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
            required: false
        - name: paymentStatus
          in: query
          description: status of payment for which the response needs to be filtered
          schema:
            type: enum
            value: ["pending", "succeeded", "failed"]
          required: true

      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        invoiceId:
                          type: uuid
                          minLength: 36
                          maxLength: 36
                        orderId:
                          type: string
                          minLength: 1
                        paymentStatus:
                          type: string
                          enum:
                            - SUCCEEDED
                            - FAILED
                            - PENDING
                        paymentTime:
                          type: string
                          minLength: 1
                        updatedAt:
                          type: string
                          minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                        consumer:
                          type: array
                          items:
                            type: object
                            properties:
                              email:
                                type: string
                              name:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    firstName:
                                      type: string
                                    lastName:
                                      type: string
                                  required:
                                    - firstName
                                    - lastName
                              id:
                                type: string
                            required:
                              - email
                              - id
                              - name
                        provider:
                          type: array
                          required: true
                          items:
                            type: object
                            properties:
                              email:
                                type: string
                              name:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    firstName:
                                      type: string
                                    lastName:
                                      type: string
                                  required:
                                    - firstName
                                    - lastName
                              id:
                                type: string
                            required:
                              - email
                              - id
                              - name
                        product:
                          type: array
                          items:
                            type: object
                            properties:
                              productId:
                                type: string
                                minLength: 1
                              productVariantId:
                                type: uuid
                                minLength: 36
                                maxLength: 36
                              resources:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    id:
                                      type: string
                                    name:
                                      type: string
                                    capabilities:
                                      type: object
                                  required:
                                    - id
                                    - name
                                    - capabilities
                              productVariantName:
                                type: string
                                minLength: 1
                              price:
                                type: number
                                minimum: 0
                              expiryInMonths:
                                type: integer
                                minimum: 1
                              resourceServerUrl:
                                type: string
                                minLength: 1
                              productVariantStatus:
                                  type: string
                                  minLength: 1
                            required:
                              - productId
                              - productVariantId
                              - resources
                              - productVariantName
                              - price
                              - expiryInMonths
                              - resourceServerUrl
                              - productVariantStatus
                      required:
                        - invoiceId
                        - orderId
                        - paymentStatus
                        - paymentTime
                        - updatedAt
                        - createdAt
                        - consumer
                        - provider
                        - product
                required:
                  - type
                  - title
                  - results
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2024-02-16T04:51:15.239497'
                        createdAt: '2024-02-15T04:51:15.239497'
                        resources:
                          - id: 2d043bdb-fc62-4650-8426-dc72492cd621
                            name: TEST ITEM FOR APD /verify TESTS
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct5ui'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2024-02-15T03:51:15.239497'
                        createdAt: '2024-02-14T04:51:15.239497'
                        resources:
                          - id: b58da193-23d9-43eb-b98a-a103d4b6103c
                            name: FW055 Environment-UUID
              examples:
                List Successful purchases:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "invoiceId": "749c9e3c-5e9b-4149-bcf5-463ef5fda6db",
                          "orderId": "order_NjRRg27ZUdAfKD",
                          "paymentStatus": "SUCCEEDED",
                          "paymentTime": "2024-03-07T11:02:31.151636",
                          "expiryAt": "2024-06-15T13:21:01.484760",
                          "updatedAt": "2024-03-07T12:49:08.555449",
                          "createdAt": "2024-03-07T11:02:31.186373",
                          "consumer": {
                            "email": "vasanth.rajaraman@datakaveri.org",
                            "name": {
                              "firstName": "Vasanth",
                              "lastName": "Rajaraman"
                            },
                            "id": "fd47486b-3497-4248-ac1e-082e4d37a66c"
                          },
                          "provider": {
                            "email": "bryanrobert@iisc.ac.in",
                            "name": {
                              "firstName": "B",
                              "lastName": "Robert A B C D"
                            },
                            "id": "b2c27f3f-2524-4a84-816e-91f9ab23f837"
                          },
                          "product": {
                            "productId": "urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct",
                            "productVariantId": "fd001bb7-33c3-4c8c-948e-1aa75bd47d19",
                            "resources": [
                              {
                                "id": "83c2e5c2-3574-4e11-9530-2b1fbdfce832",
                                "name": "Surat Transit Realtime Position-UUID",
                                "capabilities": [
                                  "api"
                                ]
                              },
                              {
                                "id": "695e222b-3fae-4325-8db0-3e29d01c4fc0",
                                "name": "RS Adaptor Test Resource",
                                "capabilities": [
                                  "sub",
                                  "file"
                                ]
                              }
                            ],
                            "productVariantName": "variant1",
                            "price": 150.0,
                            "expiryInMonths": 12,
                            "resourceServerUrl": "some.dummy.server",
                            "productVariantStatus": "ACTIVE"
                          }
                        }
                      ]
                    }
                List Pending purchases:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "invoiceId": "df9645ba-bb93-4f51-bdbb-f55fba0aa75a",
                          "orderId": "order_NjRRrCKjZ4QYwd",
                          "paymentStatus": "PENDING",
                          "paymentTime": "2024-03-07T11:02:41.475657",
                          "updatedAt": "2024-03-07T11:02:41.507496",
                          "createdAt": "2024-03-07T11:02:41.507496",
                          "consumer": {
                            "email": "vasanth.rajaraman@datakaveri.org",
                            "name": {
                              "firstName": "Vasanth",
                              "lastName": "Rajaraman"
                            },
                            "id": "fd47486b-3497-4248-ac1e-082e4d37a66c"
                          },
                          "provider": {
                            "email": "bryanrobert@iisc.ac.in",
                            "name": {
                              "firstName": "B",
                              "lastName": "Robert A B C D"
                            },
                            "id": "b2c27f3f-2524-4a84-816e-91f9ab23f837"
                          },
                          "product": {
                            "productId": "urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct",
                            "productVariantId": "fd001bb7-33c3-4c8c-948e-1aa75bd47d19",
                            "resources": [
                              {
                                "id": "83c2e5c2-3574-4e11-9530-2b1fbdfce832",
                                "name": "Surat Transit Realtime Position-UUID",
                                "capabilities": [
                                  "api"
                                ]
                              },
                              {
                                "id": "695e222b-3fae-4325-8db0-3e29d01c4fc0",
                                "name": "RS Adaptor Test Resource",
                                "capabilities": [
                                  "sub",
                                  "file"
                                ]
                              }
                            ],
                            "productVariantName": "variant1",
                            "price": 150.0,
                            "expiryInMonths": 12,
                            "resourceServerUrl": "some.dummy.server",
                            "productVariantStatus": "ACTIVE"
                          }
                        }
                      ]
                    }
                List Failed purchases:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "invoiceId": "ef9645ba-bb93-4f51-bdbb-f55fba0aa75a",
                          "orderId": "order_KjRRrCKjZ4QYwd",
                          "paymentStatus": "FAILED",
                          "paymentTime": "2023-03-06T11:02:41.475657",
                          "updatedAt": "2023-03-07T11:02:41.507496",
                          "createdAt": "2023-03-07T11:02:41.507496",
                          "consumer": {
                            "email": "vasanth.rajaraman@datakaveri.org",
                            "name": {
                              "firstName": "Vasanth",
                              "lastName": "Rajaraman"
                            },
                            "id": "fd47486b-3497-4248-ac1e-082e4d37a66c"
                          },
                          "provider": {
                            "email": "bryanrobert@iisc.ac.in",
                            "name": {
                              "firstName": "B",
                              "lastName": "Robert A B C D"
                            },
                            "id": "b2c27f3f-2524-4a84-816e-91f9ab23f837"
                          },
                          "product": {
                            "productId": "urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct",
                            "productVariantId": "fd001bb7-33c3-4c8c-948e-1aa75bd47d19",
                            "resources": [
                              {
                                "id": "83c2e5c2-3574-4e11-9530-2b1fbdfce832",
                                "name": "Surat Transit Realtime Position-UUID",
                                "capabilities": [
                                  "api"
                                ]
                              },
                              {
                                "id": "695e222b-3fae-4325-8db0-3e29d01c4fc0",
                                "name": "RS Adaptor Test Resource",
                                "capabilities": [
                                  "sub",
                                  "file"
                                ]
                              }
                            ],
                            "productVariantName": "variant1",
                            "price": 150.0,
                            "expiryInMonths": 12,
                            "resourceServerUrl": "some.dummy.server",
                            "productVariantStatus": "ACTIVE"

                          }
                        }
                      ]
                    }
        '204':
          description: no content
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
        '400':
          description: Invalid product or resource ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              example:
                value:
                  {
                    "type": "urn:dx:dmp:invalidIdValue",
                    "title": "Bad Request",
                    "detail": "Invalid id [  abcd ] "
                  }
        '404':
          description: |-
            Not Found</br>
            When given purchase information related to given resource or product ID is not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/notFoundExampleResponseListPurchases'
  /provider/product-variant:
    post:
      tags:
        - Product-Variant
      summary: ''
      description: 'Create a product variant where the body contains details about the variant such as price, duration, resources and their capabilities. Along with the name of the variant and the product it belongs to.'
      operationId: Create Product Variant
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                productId:
                  type: string
                  minLength: 1
                productVariantName:
                  type: string
                  minLength: 1
                resources:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                      capabilities:
                        type: array
                        items:
                          type: string
                    required:
                      - id
                      - capabilities
                price:
                  type: integer
                duration:
                  type: integer
              required:
                - productId
                - productVariantName
                - resources
                - price
                - duration
              x-examples:
                Example 1:
                  productId: 'urn:datakaveri.org:a3ec61uer-1677-4a84-816e-91f9ab23f832:testProduct'
                  productVariantName: sensors-1
                  resources:
                    - id: 695e222b-3fae-4325-8db0-3e29d01c4fc0
                      capabilities:
                        - api
                        - sub
                    - id: 83c2e5c2-3574-4e11-9530-2b1fbdfce832
                      capabilities:
                        - sub
                        - file
                  price: 100
                  duration: 12
            examples:
              Example 1:
                value:
                  productId: 'urn:datakaveri.org:a3ec61uer-1677-4a84-816e-91f9ab23f832:testProduct'
                  variant: sensors-1
                  resources:
                    - id: 695e222b-3fae-4325-8db0-3e29d01c4fc0
                      capabilities:
                        - api
                        - sub
                    - id: 83c2e5c2-3574-4e11-9530-2b1fbdfce832
                      capabilities:
                        - sub
                        - file
                  price: 100
                  duration: 12
      responses:
        '201':
          description: 'Success'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/createProductVariantSuccessResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "productVariantId": "f9eab2d7-b60b-4d32-aaa1-1fdc82ba0de7",
                          "productId": "urn:datakaveri.org:a3ec61uer-1677-4a84-816e-91f9ab23f832:testProduct",
                          "productVariantName": "variant1"
                        }
                      ],
                      "detail": "Product Variant created successfully"
                    }
        '400':
          description: 'Bad Request'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidPayloadFormat",
                      "title": "Bad Request",
                      "detail": "object has missing required properties ([\"productId\"])"
                    }
        '401':
          description: 'Not Authorised'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidAuthorizationToken",
                      "title": "Not Authorized",
                      "detail": "Not Authorized"
                    }
        '409':
          description: 'Conflict'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:resourceAlreadyExists",
                      "title": "Conflict",
                      "detail": "Document of given id already exists"
                    }
        '403':
          description: 'Forbidden'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:forbidden",
                      "title": "Resource is forbidden to access",
                      "detail": "Product Variant is only created after product is created"
                    }

    get:
      tags:
        - Product-Variant
      summary: ''
      description: |-
        Lists all the active product variants of a given product. 
        Product variant descriptors like it's ID, name, price, duration of product variant or expiry, 
        and other information like provider ID, resource ID and constraints of that resource, product ID and name are displayed.
      operationId: Get Product Variant
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: productId
          description: ID of the product for which product variant is to be listed
          in: query
          required: true
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
        - name: productVariantName
          description: |-
            Name of the product variant based on which product variant information is to be listed.
            This is an optional parameter.
          in: query
          schema:
            type: string
            minLength: 1
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        productVariantId:
                          type: string
                          pattern: uuid
                          minLength: 36
                          maxLength: 36
                        productVariantName:
                          type: string
                          minLength: 1
                        productId:
                          type: string
                          pattern: uuid
                          minLength: 36
                          maxLength: 36
                        resourceName:
                          type: array
                          items:
                            type: string
                        resources:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: uuid
                                minLength: 36
                                maxLength: 36
                              name:
                                type: string
                                minLength: 1
                              capabilities:
                                type: object
                            required:
                              - id
                              - name
                              - capabilities
                        price:
                          type: number
                          minimum: 0
                        expiryInMonths:
                          type: integer
                          minimum: 1
                        updatedAt:
                          type: string
                          minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                        resourceServerUrl:
                          type: string
                          minLength: 1
                        productVariantStatus:
                          type: string
                          minLength: 1
                      required:
                        - productVariantId
                        - productVariantName
                        - productId
                        - resources
                        - price
                        - expiryInMonths
                        - updatedAt
                        - createdAt
                        - resourceName
                        - resourceServerUrl
                required:
                  - type
                  - title
                  - results
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - product_variant_name: variant1
                        product_id: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        resource_name:
                          - Chandigarh Paid Parking Locations
                          - TEST ITEM FOR APD /verify TESTS
              examples:
                Get a Product Variant:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "productVariantId": "74d87fcb-a17d-4ca6-8017-7cfcd4391282",
                          "productVariantName": "someVariantName",
                          "productId": "urn:datakaveri.org:ef67e601-05f0-4d13-96ce-9cafaaf801db:testProduct",
                          "providerId": "ef67e601-05f0-4d13-96ce-9cafaaf801db",
                          "resources": [
                            {
                              "id": "45c2e5c2-3574-4e11-9530-2b1fbdfce832",
                              "name": "Surat Transit Realtime Position-UUID",
                              "capabilities": [
                                "api"
                              ]
                            },
                            {
                              "id": "325e222b-3fae-4325-8db0-3e29d01c4fc0",
                              "name": "RS Adaptor Test Resource",
                              "capabilities": [
                                "sub",
                                "file"
                              ]
                            }
                          ],
                          "price": 150.0,
                          "expiryInMonths": 12,
                          "updatedAt": "2024-02-28T12:48:26.375195",
                          "createdAt": "2023-02-28T12:48:26.375195",
                          "resourceServerUrl": "some.dummy.server",
                          "productVariantStatus": "ACTIVE"
                        }
                      ]
                    }
                List all variants of the product:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "productVariantId": "74d87fcb-a17d-4ca6-8017-7cfcd4391282",
                          "productVariantName": "someVariantName",
                          "productId": "urn:datakaveri.org:ef67e601-05f0-4d13-96ce-9cafaaf801db:testProduct1",
                          "providerId": "ef67e601-05f0-4d13-96ce-9cafaaf801db",
                          "resources": [
                            {
                              "id": "83c2e5c2-3574-4e11-9530-2b1fbdfce832",
                              "name": "Surat Transit Realtime Position-UUID",
                              "capabilities": [
                                "api"
                              ]
                            },
                            {
                              "id": "695e222b-3fae-4325-8db0-3e29d01c4fc0",
                              "name": "RS Adaptor Test Resource",
                              "capabilities": [
                                "sub",
                                "file"
                              ]
                            }
                          ],
                          "price": 150.0,
                          "expiryInMonths": 12,
                          "updatedAt": "2023-02-28T12:48:26.375195",
                          "createdAt": "2023-01-28T12:48:26.375195",
                          "resourceServerUrl": "some.dummy.server",
                          "productVariantStatus": "ACTIVE"
                        },
                        {
                          "productVariantId": "be85f112-51e6-4248-a254-38c3e13151fa",
                          "productVariantName": "someTestVariantName",
                          "productId": "urn:datakaveri.org:ef67e601-05f0-4d13-96ce-9cafaaf801db:testProduct2",
                          "providerId": "ef67e601-05f0-4d13-96ce-9cafaaf801db",
                          "resources": [
                            {
                              "id": "82c2e5c2-3574-4e11-9530-2b1fbdfce832",
                              "name": "Some other name",
                              "capabilities": [
                                "api"
                              ]
                            },
                            {
                              "id": "675e222b-3fae-4325-8db0-3e29d01c4fc0",
                              "name": "Test resource name",
                              "capabilities": [
                                "sub",
                                "file"
                              ]
                            }
                          ],
                          "price": 200,
                          "expiryInMonths": 4,
                          "updatedAt": "2022-02-28T12:48:26.375195",
                          "createdAt": "2023-01-28T12:48:26.375195",
                          "resourceServerUrl": "some.dummy.server",
                          "productVariantStatus": "ACTIVE"

                        },
                        {
                          "productVariantId": "3780dedb-e0a6-4eff-a05c-8b2aa555a598",
                          "productVariantName": "someOtherVariantName",
                          "productId": "urn:datakaveri.org:ef67e601-05f0-4d13-96ce-9cafaaf801db:testProduct3",
                          "providerId": "ef67e601-05f0-4d13-96ce-9cafaaf801db",
                          "resources": [
                            {
                              "id": "94c2e5c2-3574-4e11-9530-2b1fbdfce832",
                              "name": "Some resource name",
                              "capabilities": [
                                "api"
                              ]
                            },
                            {
                              "id": "655e222b-3fae-4325-8db0-3e29d01c4fc0",
                              "name": "Dummy resource name",
                              "capabilities": [
                                "sub",
                                "file"
                              ]
                            }
                          ],
                          "price": 145.0,
                          "expiryInMonths": 2,
                          "updatedAt": "2021-02-28T12:48:26.375195",
                          "createdAt": "2023-01-20T12:48:26.375195",
                          "resourceServerUrl": "some.dummy.server",
                          "productVariantStatus": "ACTIVE"
                        }
                      ]
                    }
        '400':
          description: Invalid Product ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              example:
                value:
                  {
                    "type": "urn:dx:dmp:invalidIdValue",
                    "title": "Bad Request",
                    "detail": "Invalid id [  abcd ] "
                  }
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              example:
                value:
                  {
                    "type": "urn:dx:dmp:resourceNotFound",
                    "title": "Not Found",
                    "detail": "Product variants not found"
                  }
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'

    put:
      tags:
        - Product-Variant
      summary: ''
      operationId: Update Product Variant
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                productId:
                  type: string
                  minLength: 1
                productVariantName:
                  type: string
                  minLength: 1
                resources:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                      capabilities:
                        type: array
                        items:
                          type: string
                    required:
                      - id
                      - capabilities
                price:
                  type: number
                  minimum: 0
                duration:
                  type: integer
                  minimum: 1
              required:
                - productId
                - productVariantName
                - resources
                - price
                - duration
              x-examples:
                Example 1:
                  id: 'urn:datakaveri.org:a3ec61uer-1677-4a84-816e-91f9ab23f832:testProduct'
                  productVariantName: sensors-1
                  resources:
                    - id: 695e222b-3fae-4325-8db0-3e29d01c4fc0
                      capabilities:
                        - api
                        - sub
                    - id: 83c2e5c2-3574-4e11-9530-2b1fbdfce832
                      capabilities:
                        - sub
                        - file
                  price: 100
                  duration: 12
            examples:
              Example 1:
                value:
                  productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct'
                  productVariantName: sensors-1
                  resources:
                    - id: 83c2e5c2-3574-4e11-9530-2b1fbdfce832
                      capabilities:
                        - api
                        - sub
                    - id: 695e222b-3fae-4325-8db0-3e29d01c4fc0
                      capabilities:
                        - sub
                        - async
                  price: 100
                  duration: 11
      responses:
        '200':
          description: 'Success'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/createProductVariantSuccessResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "productId": "urn:datakaveri.org:a3ec61uer-1677-4a84-816e-91f9ab23f832:testProduct",
                          "variant": "variant1"
                        }
                      ],
                      "detail": "Product Variant created successfully"
                    }
        '400':
          description: 'Bad Request'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidPayloadFormat",
                      "title": "Bad Request",
                      "detail": "object has missing required properties ([\"productId\"])"
                    }
        '401':
          description: 'Not Authorised'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidAuthorizationToken",
                      "title": "Not Authorized",
                      "detail": "Not Authorized"
                    }
    delete:
      tags:
        - Product-Variant
      summary: ''
      operationId: Delete Product Variant
      parameters:
        - name: token
          in: header
          description: IUDX Auth token to process the request
          schema:
            type: string
        - name: productVariantId
          in: query
          schema:
            type: uuid
            minLength: 36
            maxLength: 36
          required: true
      responses:
        '200':
          description: 'Success'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:Success",
                      "title": "Success",
                      "detail": "Successfully deleted"
                    }
        '400':
          description: 'Bad Request'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidId",
                      "title": "Bad Request",
                      "detail": "Given ID is invalid [ dummyProductVariantId ] "
                    }
        '401':
          description: 'Not Authorized'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidAuthorizationToken",
                      "title": "Not Authorized",
                      "detail": "Not Authorized"
                    }
        '404':
          description: 'Not Found'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Example 1:
                  value:
                    {
                      "type": "urn:dx:dmp:resourceNotFound",
                      "title": "Document of given id does not exist",
                      "detail": "Product variant not found"
                    }

  /account:
    post:
      tags:
        - Linked-Account
      summary: Create Linked account
      description: |-
        A provider could create a linked account to start the process of receiving payments via Payment Gateway. A provider or provider 
        delegate could use this API to provide their business related information. Once a linked account is created, the provider can
        visit their payment gateway related dashboard to switch their merchant account, monitor payment done to their account 
        and refund amount if a customer raises a dispute. A provider could update their account related information like account number, IFSC code through
        their dashboard.
        <br>
        <br>
        While creating registering with Razorpay, and Keycloak registration (registration as provider with DX platform), 
        <b>same email ID</b> needs to be used 
        <br>
        <br>
        `Note`: By creating a linked account, the provider is accepting the terms and conditions of the respective payment gateway
      operationId: post-linked-account-v1
      parameters:
        - name: token
          in: header
          description: AAA issued identity token
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 512
            pattern: '^[a-zA-Z0-9_*\-*\.\/]+$'
      requestBody:
        description: Request body is a JsonObject containing ID whose value is the policy ID.
        content:
          application/json:
            schema:
              type: object
              properties:
                phone:
                  type: string
                  minLength: 8
                  maxLength: 15
                  description: Business phone number
                legalBusinessName:
                  type: string
                  minLength: 4
                  maxLength: 200
                  description: Linked Account's business
                customerFacingBusinessName:
                  type: string
                  minLength: 1
                  maxLength: 255
                  description: Linked account billing label
                businessType:
                  type: string
                  enum: [ llp, ngo, other, individual, partnership, proprietorship, public_limited, private_limited, trust, society, not_yet_registered, educational_institutes ]
                  description: Provider's business type. Here are the list of values - [link](https://razorpay.com/docs/payments/route/integration-guide/#business-type)
                contactName:
                  type: string
                  description: name of the contact
                  minLength: 4
                  maxLength: 255
                profile:
                  description: Business profile for linked account
                  type: object
                  properties:
                    category:
                      type: string
                      enum: [ financial_services, education, healthcare, utilities, government, logistics, tours_and_travel ,transport ,ecommerce ,food ,it_and_software ,gaming ,media_and_entertainment ,services ,housing ,not_for_profit ,social ,others ]
                      description: business category of the account holder. Please refer the given link to look at updated list of suitable values for category field - [link](https://razorpay.com/docs/payments/route/integration-guide/#business-category)
                      minLength: 1
                      required: true
                    subcategory:
                      type: string
                      description: |-
                        business sub-category of the account holder
                        Please refer the given link to find suitable list of values - [link](https://razorpay.com/docs/payments/route/integration-guide/#business-sub-category)
                    addresses:
                      type: object
                      properties:
                        registered:
                          type: object
                          description: Details of account holder's registered address
                          properties:
                            street1:
                              type: string
                              maxLength: 100
                              description: Address Line 1
                            street2:
                              type: string
                              maxLength: 100
                              description: Address Line 2
                            city:
                              type: string
                              maxLength: 100
                              description: city name
                            state:
                              type: string
                              minLength: 2
                              maxLength: 32
                              description: state name
                            postalCode:
                              type: string
                              minLength: 6
                              maxLength: 6
                            country:
                              type: string
                              minLength: 2
                              maxLength: 64
                              description: |-
                                country code in capital letters `IN` or full name of the country in lower case letters `india`
                                <br>
                                Here is a list of support countries - [link](https://razorpay.com/docs/partners/aggregators/onboarding-api/appendix/#country-list)

                          required:
                            - street1
                            - street2
                            - city
                            - state
                            - postalCode
                            - country
                      required:
                        - registered
                  required:
                    - category
                    - subcategory
                    - addresses
                legalInfo:
                  type: object
                  description:
                  properties:
                    pan:
                      type: string
                      minLength: 10
                      maxLength: 10
                      pattern: '/^[a-zA-z]{5}\d{4}[a-zA-Z]{1}$/'
                    gst:
                      type: string
                      minLength: 15
                      maxLength: 15
                      pattern: '/^[0123][0-9][a-z]{5}[0-9]{4}[a-z][0-9][a-z0-9][a-z0-9]$/gi'
              required:
                - phone
                - legalBusinessName
                - businessType
                - profile

            examples:
              Request body for Create Linked Account:
                value:
                  phone: '9000090000'
                  legalBusinessName: Dummy Corp V1
                  customerFacingBusinessName: Dummy Service Corp V1
                  businessType: partnership
                  contactName: Bob Davis
                  profile:
                    category: healthcare
                    subcategory: clinic
                    addresses:
                      registered:
                        street1: '507, Koramangala 1st block'
                        street2: MG Road
                        city: Bengaluru
                        state: KARNATAKA
                        postalCode: '560034'
                        country: IN
                  legalInfo:
                    pan: AAACL1234C
                    gst: 18AABCU9603R1ZM

      responses:
        '200':
          description: Linked account creation successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/createLinkedAccount'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '400':
          description: |-
            Bad Request
            - Provider's email was used to create a linked account through DMP Server previously
            - Route code support feature could be enabled by the provider
            - Invalid IFSC code
            - account_code feature not enabled
            - Invalid name, email
            - Enter a valid name with alphanumerics and spaces
            - Account might be suspended

          content:
            application/json:
              schema:
                $ref: '#/components/schemas/createLinkedAccountErrorResponse'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '401':
          description: |-
            Unauthorized
              - `token` invalid/expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
      security:
        - authorization: [ ]
    put:
      tags:
        - Linked-Account
      summary: Update Linked account
      description: |-
        A provider could update details related to their linked account. After creating a linked account through DMP, 
        all the details except `businessType`, `email` could be changed. The accountId could be sent in the request body
        to update the linked account related information. The accountId could be fetched from GET `/account` API
        <br>
        <br>
      operationId: update-linked-account-v1
      parameters:
        - name: token
          in: header
          description: AAA issued identity token
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 512
            pattern: '^[a-zA-Z0-9_*\-*\.\/]+$'
      requestBody:
        description: Request body is a JsonObject containing ID whose value is the policy ID.
        content:
          application/json:
            schema:
              type: object
              properties:
                phone:
                  type: string
                  minLength: 8
                  maxLength: 15
                  description: Business phone number
                legalBusinessName:
                  type: string
                  minLength: 4
                  maxLength: 200
                  description: Linked Account's business
                customerFacingBusinessName:
                  type: string
                  minLength: 1
                  maxLength: 255
                  description: Linked account billing label
                contactName:
                  type: string
                  description: name of the contact
                  minLength: 4
                  maxLength: 255
                profile:
                  description: Business profile for linked account
                  type: object
                  properties:
                    category:
                      type: string
                      enum: [ financial_services, education, healthcare, utilities, government, logistics, tours_and_travel ,transport ,ecommerce ,food ,it_and_software ,gaming ,media_and_entertainment ,services ,housing ,not_for_profit ,social ,others ]
                      description: business category of the account holder. Please refer the given link to look at updated list of suitable values for category field - [link](https://razorpay.com/docs/payments/route/integration-guide/#business-category)
                      minLength: 1
                      required: true
                    subcategory:
                      type: string
                      description: |-
                        business sub-category of the account holder
                        Please refer the given link to find suitable list of values - [link](https://razorpay.com/docs/payments/route/integration-guide/#business-sub-category)
                    addresses:
                      type: object
                      properties:
                        registered:
                          type: object
                          description: Details of account holder's registered address
                          properties:
                            street1:
                              type: string
                              maxLength: 100
                              description: Address Line 1
                            street2:
                              type: string
                              maxLength: 100
                              description: Address Line 2
                            city:
                              type: string
                              maxLength: 100
                              description: city name
                            state:
                              type: string
                              minLength: 2
                              maxLength: 32
                              description: state name
                            postalCode:
                              type: string
                              minLength: 6
                              maxLength: 6
                            country:
                              type: string
                              minLength: 2
                              maxLength: 64
                              description: |-
                                country code in capital letters `IN` or full name of the country in lower case letters `india`
                                <br>
                                Here is a list of support countries - [link](https://razorpay.com/docs/partners/aggregators/onboarding-api/appendix/#country-list)

                          required:
                            - street1
                            - street2
                            - city
                            - state
                            - postalCode
                            - country
                      required:
                        - registered
                  required:
                    - category
                    - subcategory
                    - addresses
                legalInfo:
                  type: object
                  description:
                  properties:
                    pan:
                      type: string
                      minLength: 10
                      maxLength: 10
                      pattern: '/^[a-zA-z]{5}\d{4}[a-zA-Z]{1}$/'
                    gst:
                      type: string
                      minLength: 15
                      maxLength: 15
                      pattern: '/^[0123][0-9][a-z]{5}[0-9]{4}[a-z][0-9][a-z0-9][a-z0-9]$/gi'
              required:
                - phone
                - legalBusinessName
                - profile

            examples:
              Request body for Update Linked Account:
                value:
                  {
                    "phone": "9100090000",
                    "legalBusinessName": "Dummy Corp V2",
                    "customerFacingBusinessName": "Some Other Corp",
                    "contactName": "Test Name",
                    "profile": {
                      "category": "healthcare",
                      "subcategory": "doctors",
                      "addresses": {
                        "registered": {
                          "street1": "Outer Ring road",
                          "street2": "MG Road",
                          "city": "Bengaluru",
                          "state": "KARNATAKA",
                          "postalCode": "560038",
                          "country": "india"
                        }
                      }
                    },
                    "legalInfo": {
                      "pan": "ABACL1234C",
                      "gst": "19AABCU9603R1ZM"
                    }
                  }

      responses:
        '200':
          description: Linked account creation successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/updateLinkedAccount'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '400':
          description: |-
            Bad Request
            - Merchant account has been locked by the admin when extra fields are submitted and are under review
            - Invalid name, email
            - Enter a valid name with alphanumerics and spaces

          content:
            application/json:
              schema:
                $ref: '#/components/schemas/updateLinkedAccountErrorResponse'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '401':
          description: |-
            Unauthorized
              - `token` invalid/expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '404':
          description: |-
            Not Found
              - A linked account for the given provider was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/updateLinkedAccountNotFoundResponse'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
      security:
        - authorization: [ ]
    get:
      tags:
        - Linked-Account
      summary: Fetch Linked account
      description: |-
        A provider could fetch the information related to their linked account provided while creating the 
        linked account to the Payment Gateway through this endpoint. 
        <br>
        `Note`: This API is only called after calling POST `/account` API through DMP
        <br>
      operationId: get-linked-account-v1
      parameters:
        - name: token
          in: header
          description: AAA issued identity token
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 512
            pattern: '^[a-zA-Z0-9_*\-*\.\/]+$'
      responses:
        '200':
          description: Linked account creation successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/fetchLinkedAccountWithGivenFields'
          #                oneOf:
          #                  - $ref: '#/components/schemas/fetchLinkedAccountWithGivenFields'
          #                  - $ref: '#/components/schemas/fetchLinkedAccountWithOtherFields'

          headers:
            Content-Type:
              schema:
                type: string
              description: application/json

        '401':
          description: |-
            Unauthorized
              - `token` invalid/expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '404':
          description: |-
            Not Found
              - Linked account for the given provider is not found if it we try fetching it before a linked account is successfully created
                or if linked account is yet to be to be approved by Payment Gateway
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/fetchLinkedAccountNotFound'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
      security:
        - authorization: [ ]

  /consumer/list/resources:
    get:
      tags:
        - Consumer-List-APIs
      summary: List resources
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: providerId
          in: query
          description: Id of the provider for listing their resources
          required: false
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
        - name: resourceId
          in: query
          description: Id of the resource for its details
          required: false
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        resourceId:
                          type: string
                          pattern: uuid
                          minLength: 36
                          maxLength: 36
                        resourceName:
                          type: string
                          minLength: 1
                        accessPolicy:
                          enum: ["SECURE", "OPEN"]
                        updatedAt:
                          type: string
                          minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                        resourceServerUrl:
                          type: string
                          minLength: 1
                        providerName:
                          type: string
                      required:
                        - resourceId
                        - resourceName
                        - accessPolicy
                        - updatedAt
                        - createdAt
                        - resourceServerUrl
                        - providerName
                required:
                  - type
                  - title
                  - results
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - resourceId: a347c5b6-5281-4749-9eab-89784d8f8f9a
                        resourceName: Chandigarh Paid Parking Locations
                        accessPolicy: OPEN
                        updatedAt: '2024-12-01T19:26:13.005418'
                        createdAt: '2024-12-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: 2d043bdb-fc62-4650-8426-dc72492cd621
                        resourceName: TEST ITEM FOR APD /verify TESTS
                        accessPolicy: SECURE
                        updatedAt: '2024-11-01T19:26:13.005418'
                        createdAt: '2024-11-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: b58da193-23d9-43eb-b98a-a103d4b6103c
                        resourceName: FW055 Environment-UUID
                        accessPolicy: OPEN
                        updatedAt: '2024-10-01T19:26:13.005418'
                        createdAt: '2024-10-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: ae2b8b01-f642-411a-babb-cbd1b75fa2a1
                        resourceName: Flood level data from FWR055
                        accessPolicy: SECURE
                        updatedAt: '2024-09-01T19:26:13.005418'
                        createdAt: '2024-09-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
              examples:
                List All Resources:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - resourceId: a347c5b6-5281-4749-9eab-89784d8f8f9a
                        resourceName: Chandigarh Paid Parking Locations
                        accessPolicy: OPEN
                        updatedAt: '2024-12-01T19:26:13.005418'
                        createdAt: '2024-12-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: 2d043bdb-fc62-4650-8426-dc72492cd621
                        resourceName: TEST ITEM FOR APD /verify TESTS
                        accessPolicy: SECURE
                        updatedAt: '2024-11-01T19:26:13.005418'
                        createdAt: '2024-11-01T19:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: b58da193-23d9-43eb-b98a-a103d4b6103c
                        resourceName: FW055 Environment-UUID
                        accessPolicy: OPEN
                        updatedAt: '2024-10-01T19:26:13.005418'
                        createdAt: '2024-10-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: ae2b8b01-f642-411a-babb-cbd1b75fa2a1
                        resourceName: Flood level data from FWR055
                        accessPolicy: SECURE
                        updatedAt: '2024-09-01T19:26:13.005418'
                        createdAt: '2024-09-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                List Resource of Provider:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - resourceId: a347c5b6-5281-4749-9eab-89784d8f8f9a
                        resourceName: Chandigarh Paid Parking Locations
                        accessPolicy: OPEN
                        updatedAt: '2024-12-01T19:26:13.005418'
                        createdAt: '2024-12-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: 2d043bdb-fc62-4650-8426-dc72492cd621
                        resourceName: TEST ITEM FOR APD /verify TESTS
                        accessPolicy: SECURE
                        updatedAt: '2024-11-01T19:26:13.005418'
                        createdAt: '2024-11-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: b58da193-23d9-43eb-b98a-a103d4b6103c
                        resourceName: FW055 Environment-UUID
                        accessPolicy: OPEN
                        updatedAt: '2024-10-01T19:26:13.005418'
                        createdAt: '2024-10-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                      - resourceId: ae2b8b01-f642-411a-babb-cbd1b75fa2a1
                        resourceName: Flood level data from FWR055
                        accessPolicy: SECURE
                        updatedAt: '2024-09-01T19:26:13.005418'
                        createdAt: '2024-09-01T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
                List Resource by ID:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - resourceId: a347c5b6-5281-4749-9eab-89784d8f8f9a
                        resourceName: Chandigarh Paid Parking Locations
                        accessPolicy: OPEN
                        updatedAt: '2024-03-03T19:26:13.005418'
                        createdAt: '2024-03-03T17:26:13.005418'
                        resourceServerUrl: 'rs.iudx.io'
                        providerName: Administrator of the IUDX platform
        '204':
          description: no content
        '400':
          description: invalid document
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Doesn't Exist:
                  value:
                    type: 'urn:dx:dmp:DocDoesNotExist'
                    detail: 'Fail: provider does not exist'
                    title: Provider does not exist
                Invalid name:
                  value:
                    type: 'urn:dx:dmp:InvalidNameValue'
                    title: Bad request
                    detail: 'Invalid provider id value [ abc&23? ]'
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Unauthorized:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidAuthorizationToken",
                      "title": "Not Authorized",
                      "detail": "Not Authorized"
                    }
  /consumer/list/providers:
    get:
      tags:
        - Consumer-List-APIs
      summary: List providers
      description: |-
        Lists provider specific information for the consumer to buy products based on the resources of a give
        provider. Number of resources of the provider is added in the response along with provider details like
        ID, provider name and resource server URL to which the provider belongs
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: providerId
          in: query
          description: ID of the provider for its details. This is an optional parameter
          required: false
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        providerId:
                          type: string
                          pattern: uuid
                          minLength: 36
                          maxLength: 36
                        providerName:
                          type: string
                          minLength: 1
                        numberOfResources:
                          type: integer
                          minimum: 1
                        resourceServerUrl:
                          type: string
                          minLength: 1
                        updatedAt:
                          type: string
                          minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                      required:
                        - providerId
                        - providerName
                        - numberOfResources
                        - resourceServerUrl
                        - updatedAt
                        - createdAt
                required:
                  - type
                  - title
                  - results

                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - providerId: b2c27f3f-2524-4a84-816e-91f9ab23f837
                        numberOfResources: 8
                        providerName: Administrator of the IUDX platform
                        resourceServerUrl: 49cf5c76-09de-11ee-be56-0242ac120002
                        updatedAt: '2024-03-02T19:00:00.885808'
                        createdAt: '2024-02-02T15:00:00.885808'
              examples:
                List All Providers:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "providerId": "b2c27f3f-2524-4a84-816e-91f9ab23f837",
                          "numberOfResources": 8,
                          "providerName": "Administrator of the IUDX platform",
                          "resourceServerUrl": "rs.iudx.io",
                          "updatedAt": "2024-03-02T19:00:00.885808",
                          "createdAt": "2024-02-02T15:00:00.885808"

                        },
                        {
                          "providerId": "c3a2af3f-2524-4a84-816e-91f9ab23d375",
                          "numberOfResources": 5,
                          "providerName": "Administrator of the platform",
                          "resourceServerUrl": "rs.iudx.io",
                          "updatedAt": "2024-02-15T10:42:39.513330",
                          "createdAt": "2024-02-08T10:42:39.513330"
                        }
                      ]
                    }
                List Provider by ID:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "providerId": "b2c27f3f-2524-4a84-816e-91f9ab23f837",
                          "numberOfResources": 8,
                          "providerName": "Administrator of the IUDX platform",
                          "resourceServerUrl": "rs.iudx.io",
                          "updatedAt": "2024-03-02T19:00:00.885808",
                          "createdAt": "2024-02-02T19:00:00.885808"
                        }
                      ]
                    }
        '204':
          description: no content
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Unauthorized:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidAuthorizationToken",
                      "title": "Not Authorized",
                      "detail": "Not Authorized"
                    }

        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Unauthorized:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidId",
                      "title": "Bad Request",
                      "detail": "Given ID is invalid [ datakaveri.org/b8bd3e3f39615c8ec96722131ae95056b5938f2f/invalid ] "
                    }
  /consumer/list/purchases:
    get:
      tags:
        - Consumer-List-APIs
      summary: List purchases
      description: |-
        Lists consumer information [id, email, name], provider information [id, email, name],
        product information [product and variant id, name, resources with constraints, expiry and price],
        along with purchase related information [orderId, invoiceId, payment status and time].
        Expiry at field would be displayed when the payment status is `SUCCEEDED`.
        </br>
        The response could be also be filtered based on productId or resourceId.

      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: productId
          in: query
          description: purchases based on productId. Specifying this is optional
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
            required: false
        - name: resourceId
          in: query
          description: purchases based on resourceId. Specifying this is optional
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36
          required: false
        - name: paymentStatus
          in: query
          description: status of payment for which the response needs to be filtered
          schema:
            type: string
            enum: [succeeded, pending, failed]
          required: true
        - name: orderId
          in: query
          description: order ID of payment for which the succeeded, pending, failed payments needs to be filtered
          schema:
            type: string
            pattern: 'order_[a-zA-Z0-9]+'
            minLength: 6

      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        invoiceId:
                          type: uuid
                          minLength: 36
                          maxLength: 36
                        orderId:
                          type: string
                          minLength: 1
                        paymentStatus:
                          type: string
                          enum:
                            - SUCCEEDED
                            - FAILED
                            - PENDING
                        paymentTime:
                          type: string
                          minLength: 1
                        updatedAt:
                          type: string
                          minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                        consumer:
                          type: array
                          items:
                            type: object
                            properties:
                              email:
                                type: string
                              name:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    firstName:
                                      type: string
                                    lastName:
                                      type: string
                                  required:
                                    - firstName
                                    - lastName
                              id:
                                type: string
                            required:
                              - email
                              - id
                              - name
                        provider:
                          type: array
                          required: true
                          items:
                            type: object
                            properties:
                              email:
                                type: string
                              name:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    firstName:
                                      type: string
                                    lastName:
                                      type: string
                                  required:
                                    - firstName
                                    - lastName
                              id:
                                type: string
                            required:
                              - email
                              - id
                              - name
                        product:
                          type: array
                          items:
                            type: object
                            properties:
                              productId:
                                type: string
                                minLength: 1
                              productVariantId:
                                type: uuid
                                minLength: 36
                                maxLength: 36
                              resources:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    id:
                                      type: string
                                    name:
                                      type: string
                                    capabilities:
                                      type: object
                                  required:
                                    - id
                                    - name
                                    - capabilities
                              productVariantName:
                                type: string
                                minLength: 1
                              price:
                                type: number
                                minimum: 0
                              expiryInMonths:
                                type: integer
                                minimum: 1
                              resourceServerUrl:
                                type: string
                                minLength: 1
                              productVariantStatus:
                                type: string
                                minLength: 1
                            required:
                              - productId
                              - productVariantId
                              - resources
                              - productVariantName
                              - price
                              - expiryInMonths
                              - productVariantStatus
                              - resourceServerUrl
                      required:
                        - invoiceId
                        - orderId
                        - paymentStatus
                        - paymentTime
                        - updatedAt
                        - createdAt
                        - consumer
                        - provider
                        - product
                required:
                  - type
                  - title
                  - results
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2024-02-16T04:51:15.239497'
                        createdAt: '2024-02-15T04:51:15.239497'
                        resources:
                          - id: 2d043bdb-fc62-4650-8426-dc72492cd621
                            name: TEST ITEM FOR APD /verify TESTS
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct5ui'
                        providerName: Administrator of the IUDX platform
                        updatedAt: '2024-02-15T03:51:15.239497'
                        createdAt: '2024-02-14T04:51:15.239497'
                        resources:
                          - id: b58da193-23d9-43eb-b98a-a103d4b6103c
                            name: FW055 Environment-UUID
              examples:
                List Successful purchases:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "invoiceId": "749c9e3c-5e9b-4149-bcf5-463ef5fda6db",
                          "orderId": "order_NjRRg27ZUdAfKD",
                          "paymentStatus": "SUCCEEDED",
                          "paymentTime": "2024-03-07T11:02:31.151636",
                          "expiryAt": "2024-06-15T13:21:01.484760",
                          "updatedAt": "2024-03-07T12:49:08.555449",
                          "createdAt": "2024-03-07T11:02:31.186373",
                          "consumer": {
                            "email": "vasanth.rajaraman@datakaveri.org",
                            "name": {
                              "firstName": "Vasanth",
                              "lastName": "Rajaraman"
                            },
                            "id": "fd47486b-3497-4248-ac1e-082e4d37a66c"
                          },
                          "provider": {
                            "email": "bryanrobert@iisc.ac.in",
                            "name": {
                              "firstName": "B",
                              "lastName": "Robert A B C D"
                            },
                            "id": "b2c27f3f-2524-4a84-816e-91f9ab23f837"
                          },
                          "product": {
                            "productId": "urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct",
                            "productVariantId": "fd001bb7-33c3-4c8c-948e-1aa75bd47d19",
                            "resources": [
                              {
                                "id": "83c2e5c2-3574-4e11-9530-2b1fbdfce832",
                                "name": "Surat Transit Realtime Position-UUID",
                                "capabilities": [
                                  "api"
                                ]
                              },
                              {
                                "id": "695e222b-3fae-4325-8db0-3e29d01c4fc0",
                                "name": "RS Adaptor Test Resource",
                                "capabilities": [
                                  "sub",
                                  "file"
                                ]
                              }
                            ],
                            "productVariantName": "variant1",
                            "price": 150.0,
                            "expiryInMonths": 12,
                            "resourceServerUrl": "some.dummy.server",
                            "productVariantStatus": "ACTIVE"
                          }
                        }
                      ]
                    }
                List Pending purchases:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "invoiceId": "df9645ba-bb93-4f51-bdbb-f55fba0aa75a",
                          "orderId": "order_NjRRrCKjZ4QYwd",
                          "paymentStatus": "PENDING",
                          "paymentTime": "2024-03-07T11:02:41.475657",
                          "updatedAt": "2024-03-07T11:02:41.507496",
                          "createdAt": "2024-03-07T11:02:41.507496",
                          "consumer": {
                            "email": "vasanth.rajaraman@datakaveri.org",
                            "name": {
                              "firstName": "Vasanth",
                              "lastName": "Rajaraman"
                            },
                            "id": "fd47486b-3497-4248-ac1e-082e4d37a66c"
                          },
                          "provider": {
                            "email": "bryanrobert@iisc.ac.in",
                            "name": {
                              "firstName": "B",
                              "lastName": "Robert A B C D"
                            },
                            "id": "b2c27f3f-2524-4a84-816e-91f9ab23f837"
                          },
                          "product": {
                            "productId": "urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct",
                            "productVariantId": "fd001bb7-33c3-4c8c-948e-1aa75bd47d19",
                            "resources": [
                              {
                                "id": "83c2e5c2-3574-4e11-9530-2b1fbdfce832",
                                "name": "Surat Transit Realtime Position-UUID",
                                "capabilities": [
                                  "api"
                                ]
                              },
                              {
                                "id": "695e222b-3fae-4325-8db0-3e29d01c4fc0",
                                "name": "RS Adaptor Test Resource",
                                "capabilities": [
                                  "sub",
                                  "file"
                                ]
                              }
                            ],
                            "productVariantName": "variant1",
                            "price": 150.0,
                            "expiryInMonths": 12,
                            "resourceServerUrl": "some.dummy.server",
                            "productVariantStatus": "ACTIVE"
                          }
                        }
                      ]
                    }
                List Failed purchases:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "invoiceId": "ef9645ba-bb93-4f51-bdbb-f55fba0aa75a",
                          "orderId": "order_KjRRrCKjZ4QYwd",
                          "paymentStatus": "FAILED",
                          "paymentTime": "2023-03-06T11:02:41.475657",
                          "updatedAt": "2023-03-07T11:02:41.507496",
                          "createdAt": "2023-03-07T11:02:41.507496",
                          "consumer": {
                            "email": "vasanth.rajaraman@datakaveri.org",
                            "name": {
                              "firstName": "Vasanth",
                              "lastName": "Rajaraman"
                            },
                            "id": "fd47486b-3497-4248-ac1e-082e4d37a66c"
                          },
                          "provider": {
                            "email": "bryanrobert@iisc.ac.in",
                            "name": {
                              "firstName": "B",
                              "lastName": "Robert A B C D"
                            },
                            "id": "b2c27f3f-2524-4a84-816e-91f9ab23f837"
                          },
                          "product": {
                            "productId": "urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct",
                            "productVariantId": "fd001bb7-33c3-4c8c-948e-1aa75bd47d19",
                            "resources": [
                              {
                                "id": "83c2e5c2-3574-4e11-9530-2b1fbdfce832",
                                "name": "Surat Transit Realtime Position-UUID",
                                "capabilities": [
                                  "api"
                                ]
                              },
                              {
                                "id": "695e222b-3fae-4325-8db0-3e29d01c4fc0",
                                "name": "RS Adaptor Test Resource",
                                "capabilities": [
                                  "sub",
                                  "file"
                                ]
                              }
                            ],
                            "productVariantName": "variant1",
                            "price": 150.0,
                            "expiryInMonths": 12,
                            "resourceServerUrl": "some.dummy.server",
                            "productVariantStatus": "ACTIVE"
                          }
                        }
                      ]
                    }
        '204':
          description: no content
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
        '400':
          description: Invalid product or resource ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              example:
                value:
                  {
                    "type": "urn:dx:dmp:invalidIdValue",
                    "title": "Bad Request",
                    "detail": "Invalid id [  abcd ] "
                  }
        '404':
          description: |-
            Not Found</br>
            When given purchase information related to given resource or product ID is not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/notFoundExampleResponseListPurchases'

  /consumer/list/products:
    get:
      tags:
        - Consumer-List-APIs
      summary: List products
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: resourceId
          in: query
          description: ID of the resource for listing products that contain it.
          required: false
          schema:
            type: uuid
            minLength: 36
            maxLength: 36
        - name: providerId
          in: query
          description: ID of the provider for listing their products
          required: false
          schema:
            type: uuid
            minLength: 36
            maxLength: 36
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        productId:
                          type: string
                          minLength: 1
                        providerName:
                          type: string
                          minLength: 1
                        resourceServerUrl:
                          type: string
                          minLength: 1
                        updatedAt:
                          type: string
                          minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                        resources:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: uuid
                                minLength: 36
                                maxLength: 36
                              name:
                                type: string
                                minLength: 1
                            required:
                              - id
                              - name
                      required:
                        - productId
                        - providerName
                        - resourceServerUrl
                        - updatedAt
                        - createdAt
                        - resources
                required:
                  - type
                  - title
                  - results
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        resourceServerUrl: 'rs.iudx.io'
                        updatedAt: '2024-02-16T04:51:15.239497'
                        createdAt: '2024-02-15T04:51:15.239497'
                        resources:
                          - id: 2d043bdb-fc62-4650-8426-dc72492cd621
                            name: TEST ITEM FOR APD /verify TESTS
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct5ui'
                        providerName: Administrator of the IUDX platform
                        resourceServerUrl: 'rs.iudx.io'
                        updatedAt: '2024-02-15T03:51:15.239497'
                        createdAt: '2024-02-14T04:51:15.239497'
                        resources:
                          - id: b58da193-23d9-43eb-b98a-a103d4b6103c
                            name: FW055 Environment-UUID
              examples:
                List All Products:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        resourceServerUrl: 'rs.iudx.io'
                        updatedAt: '2024-02-16T03:51:15.239497'
                        createdAt: '2024-02-15T03:51:15.239497'
                        resources:
                          - id: 2d043bdb-fc62-4650-8426-dc72492cd621
                            name: TEST ITEM FOR APD /verify TESTS
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct5'
                        providerName: Administrator of the IUDX platform
                        resourceServerUrl: 'rs.iudx.io'
                        updatedAt: '2024-01-15T03:51:15.239497'
                        createdAt: '2024-01-14T03:51:15.239497'
                        resources:
                          - id: b58da193-23d9-43eb-b98a-a103d4b6103c
                            name: FW055 Environment-UUID
                List Products with Resource ID:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        resourceServerUrl: 'rs.iudx.io'
                        updatedAt: '2023-10-15T03:51:15.239497'
                        createdAt: '2023-10-13T03:51:15.239497'
                        resources:
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
                List Products with Provider ID:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct1'
                        providerName: Administrator of the IUDX platform
                        resourceServerUrl: 'rs.iudx.io'
                        updatedAt: '2023-09-15T03:51:15.239497'
                        createdAt: '2023-09-14T03:51:15.239497'
                        resources:
                          - id: 2d043bdb-fc62-4650-8426-dc72492cd621
                            name: TEST ITEM FOR APD /verify TESTS
                          - id: a347c5b6-5281-4749-9eab-89784d8f8f9a
                            name: Chandigarh Paid Parking Locations
                      - productId: 'urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct5ui'
                        providerName: Administrator of the IUDX platform
                        resourceServerUrl: 'rs.iudx.io'
                        updatedAt: '2023-08-15T03:51:15.239497'
                        createdAt: '2023-08-14T03:51:15.239497'
                        resources:
                          - id: b58da193-23d9-43eb-b98a-a103d4b6103c
                            name: FW055 Environment-UUID
        '204':
          description: no content
        '400':
          description: invalid document
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponseWithObjects'
              examples:
                Invalid ID:
                  value:
                    type: 'urn:dx:dmp:InvalidResourceIDValue'
                    title: Bad request
                    detail: Invalid resource ID
        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponseWithObjects'
              examples:
                Unauthorized:
                  value:
                    {
                      "type": "urn:dx:dmp:invalidAuthorizationToken",
                      "title": "Not Authorized",
                      "detail": "Not Authorized"
                    }
  /consumer/product-variants:
    get:
      tags:
        - Consumer-List-APIs
      summary: List Product Variants
      description: |
        Lists all the `active` product variants of a given product. Product variant descriptors like it's ID, name, price,
        duration of product variant or expiry, and other information like provider ID, resource ID and constraints of that
        resource, product ID and name are displayed.
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\/\@\.]*$'
            maxLength: 512
        - name: productId
          in: query
          description: product ID for which variants need to be fetched
          required: true
          schema:
            type: string
            pattern: uuid
            minLength: 36
            maxLength: 36

      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        productVariantId:
                          type: string
                          pattern: uuid
                          minLength: 36
                          maxLength: 36
                        productVariantName:
                          type: string
                          minLength: 1
                        productId:
                          type: string
                          pattern: uuid
                          minLength: 36
                          maxLength: 36
                        resources:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: uuid
                                minLength: 36
                                maxLength: 36
                              name:
                                type: string
                                minLength: 1
                              capabilities:
                                type: array
                                items:
                                  type: object
                            required:
                              - id
                              - name
                              - capabilities
                        price:
                          type: number
                          minimum: 0
                        expiryInMonths:
                          type: integer
                          minimum: 1
                        updatedAt:
                          type: string
                          minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                        resourceServerUrl:
                          type: string
                          minLength: 1
                        productVariantStatus:
                          type: string
                          minLength: 1
                      required:
                        - productVariantId
                        - productVariantName
                        - productId
                        - resources
                        - price
                        - expiryInMonths
                        - updatedAt
                        - createdAt
                        - resourceServerUrl
                        - productVariantStatus
                required:
                  - type
                  - title
                  - results
              examples:
                List All Resources:
                  value:
                    {
                      "type": "urn:dx:dmp:success",
                      "title": "Success",
                      "results": [
                        {
                          "productVariantId": "fd001bb7-33c3-4c8c-948e-1aa75bd47d19",
                          "productVariantName": "variant1",
                          "productId": "urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct",
                          "providerId": "b2c27f3f-2524-4a84-816e-91f9ab23f837",
                          "resources": [
                            {
                              "id": "83c2e5c2-3574-4e11-9530-2b1fbdfce832",
                              "name": "Surat Transit Realtime Position-UUID",
                              "capabilities": [
                                "api"
                              ]
                            },
                            {
                              "id": "695e222b-3fae-4325-8db0-3e29d01c4fc0",
                              "name": "RS Adaptor Test Resource",
                              "capabilities": [
                                "sub",
                                "file"
                              ]
                            }
                          ],
                          "price": 150.0,
                          "expiryInMonths": 12,
                          "updatedAt": "2024-03-07T09:59:36.825012",
                          "createdAt": "2024-03-07T09:59:36.825012",
                          "resourceServerUrl": "some.dummy.server",
                          "productVariantStatus": "ACTIVE"
                        }
                      ]
                    }

        '204':
          description: no content
        '400':
          description: Invalid Product ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              example:
                value:
                  {
                    "type": "urn:dx:dmp:invalidIdValue",
                    "title": "Bad Request",
                    "detail": "Invalid id [  abcd ] "
                  }
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              example:
                type: urn:dx:dmp:resourceNotFound
                title: Document of given id does not exist
                detail: Product variants not found

        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
  /consumer/order/{variantId}:
    post:
      summary: Order
      tags:
        - Order


      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productVariantId: fd001bb7-33c3-4c8c-948e-1aa75bd47d19
                        orderId: order_NkZwGF3MgOB1gf
                        amount: 15000
                        currency: INR
                        status: Created
                    detail: Order created successfully
                required:
                  - type
                  - title
                  - results
                  - detail
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  results:
                    type: array
                    items:
                      type: object
                      required:
                        - orderId
                        - productVariantId
                        - amount
                        - status
                        - currency
                      properties:
                        orderId:
                          type: string
                        productVariantId:
                          type: uuid
                          minLength: 36
                          maxLength: 36
                        amount:
                          type: integer
                        currency:
                          type: string
                          minLength: 1
                        status:
                          type: string
                          minLength: 1
                  detail:
                    type: string
              examples:
                Example of Order Created:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    results:
                      - productVariantId: fd001bb7-33c3-4c8c-948e-1aa75bd47d19
                        orderId: order_NkZwGF3MgOB1gf
                        amount: 15000
                        currency: INR
                        status: Created
                    detail: Order created successfully

        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
              examples:
                Invalid Product Variant ID:
                  value:
                    type: 'urn:dx:dmp:invalidIdValue'
                    title: Bad Request
                    detail: 'Invalid id [ 060cc0ed-14fb-4f07-be1d-f0b66585eab ] '

        '401':
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
      operationId: post-consumer-order
      parameters:
        - name: token
          in: header
          description: DX Auth token to process the request
          required: true
          schema:
            type: string
        - name: productVariantId
          description: ID of the product variant that could obtained from list product variant API
          required: true
          in: path
          schema:
            type: uuid
            minLength: 36
            maxLength: 36
      requestBody:
        content: { }
  /verify:
    post:
      tags:
        - Policies
      summary: Verify Policy
      description: |
        Verify API endpoint is used by DX AAA Server to check if a policy is present for a given consumer for the given 
        resource with a specified provider of the resource. This check is done by DX AAA Server before issuing 
        a token. 

        DMP Data Marketplace APD Server creates policy for a given item with type `resource`
      operationId: post-verify-policy
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
            description: Keycloak issued token
            minLength: 1
            maxLength: 512
            example: Bearer <JWT>
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/exampleVerifyRequestBody'
            examples:
              Request body for verify policy:
                value:
                  user:
                    id: a109807f-6b06-4d8a-ab64-a3a19b04a3b4
                    name:
                      firstName: test
                      lastName: consumer
                    email: consumer@gmail.com
                  owner:
                    id: 114077a3-6411-4b6e-bc97-c7e81b87685d
                    name:
                      firstName: test
                      lastName: provider
                    email: test@provider.com
                  item:
                    itemId: 2a0be315-4165-4c5b-a74e-116cc89272cb
                    itemType: RESOURCE
      responses:
        '200':
          description: |-
            OK
            - An active policy is present for the consumer for given resource with given constraints
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/verifyPolicySuccessResponse'
        '400':
          description: |-
            Bad request
            - Invalid request schema
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/verifyPolicyBadRequestResponse'
        '403':
          description: |-
            forbidden
            - Policy does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/verifyPolicyForbiddenResponse'
      security:
        - authorization: [ ]
      x-internal: false
  /policies:
    get:
      tags:
        - Policies
      summary: Get Policies
      description: |
        Get policies associated with a specific user. The response is determined by the user's roles:

        - If the user is a `provider`, the response includes all policies created by the provider or their delegates.
        - If the user is a `delegate`, the response comprises policies set by the delegate or set for the consumer on whose behalf the delegate is acting.
        - If the user is a `consumer`, the response includes policies set for the consumer.

        `Note`: Please note that the response displays the policies for a user concerning a specific server.
      operationId: get-auth-v1-policies
      parameters:
        - name: Authorization
          in: header
          description: AAA issued identity token
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9_*\-*\.\/]+$'
            minLength: 1
            maxLength: 512
      responses:
        '200':
          description: Policies have been successfully listed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getPolicySuccessResponseWithResourceType'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '401':
          description: |-
            Unauthorized
              - `token` invalid/expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '404':
          description: Not Found - Policy not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/policyNotFound'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
      security:
        - authorization: [ ]
    delete:
      tags:
        - Policies
      summary: Delete Policy
      description: |-
        A provider of the resource can delete the policy. An existing active policy can be deleted by the provider or provider delegate. The request would contain id, i.e. the ID of the policy that the user wants to delete. The user can use the GET Policy API to get the policy ID.
        <br>
        <br>
        `Note`: A Provider gets to delete the policy if they find any conflict of interest with a given consumer accessing their resource
      operationId: delete-auth-v1-policies
      parameters:
        - name: Authorization
          in: header
          description: AAA issued identity token
          required: true
          schema:
            type: string
            pattern: '^[a-zA-Z0-9_*\-*\.\/]+$'
            minLength: 1
            maxLength: 512
      requestBody:
        description: Request body is a JsonObject containing ID whose value is the policy ID.
        content:
          application/json:
            schema:
              type: object
              properties:
                policyId:
                  type: uuid
                  pattern: '^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$'
                  minLength: 36
                  maxLength: 36
              required:
                - policyId
            examples:
              Request body for Delete Policy:
                value:
                  policyId: 231f6eca-6276-4993-bfeb-53cbbbba6f06
      responses:
        '200':
          description: User Policy deleted successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/deletePolicy'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '400':
          description: |-
            Bad Request
            - Id is not a valid policyId
            - Policy has expired
            - Policy was previously deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/deletePolicyErrorResponse'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '401':
          description: |-
            Unauthorized
              - `token` invalid/expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
        '404':
          description: |-
            Not Found
              - Policy id does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/deletePolicyNotFoundErrorResponse'
          headers:
            Content-Type:
              schema:
                type: string
              description: application/json
      security:

        - authorization: []
  /verify-payment:
    post:
      summary: Verify Payment
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    detail: Payment Verified for order id order_NoTOqKRmAl3jsl
                required:
                  - type
                  - title
                  - detail
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  detail:
                    type: string
              examples:
                Payment Validated:
                  value:
                    type: 'urn:dx:dmp:success'
                    title: Success
                    detail: Payment Verified for order id order_NoTOqKRmAl3jsl
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:invalidPayloadFormat'
                    title: Bad Request
                    detail: 'ECMA 262 regex "[A-Fa-f0-9]{64}" does not match input string "9d9111226feb8e169243145dc349a4ebc00d8ef9001e6514a0208a1a5f5aa7"'
                required:
                  - type
                  - title
                  - detail
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  detail:
                    type: string
              examples:
                Invalid Schema for Signature:
                  value:
                    type: 'urn:dx:dmp:invalidPayloadFormat'
                    title: Bad Request
                    detail: 'ECMA 262 regex "[A-Fa-f0-9]{64}" does not match input string "9d9111226feb8e169243145dc349a4ebc00d8ef9001e6514a0208a1a5f5aa7"'
                Invalid Signature/Payment:
                  value:
                    type: 'urn:dx:dmp:RazorPay:InvalidPayment'
                    title: RazorPay Error
                    detail: Payment Signature verification failed
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                x-examples:
                  Example 1:
                    type: 'urn:dx:dmp:invalidAuthorizationToken'
                    title: Not Authorized
                    detail: Not Authorized
                required:
                  - type
                  - title
                  - detail
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  detail:
                    type: string
              examples:
                Unauthorized:
                  value:
                    type: 'urn:dx:dmp:invalidAuthorizationToken'
                    title: Not Authorized
                    detail: Not Authorized
      operationId: post-verify-payment
      x-stoplight:
        id: u7kbvmrhky8ed
      parameters:
        - schema:
            type: string
          in: header
          name: token
          required: true
          description: DX Auth token to process the request
      requestBody:
        description: 'Request expects a Order Id, Payment Id and a Payment Signature which will be verified from RazorPay'
        content:
          application/json:
            schema:
              type: object
              x-examples:
                Example 1:
                  razorpay_order_id: order_NoTOqKRmAl3jsl
                  razorpay_payment_id: pay_NoTQyACML59inM
                  razorpay_signature: 9d9111226feb8e169243145dc349a4ebc00d8ef9001e6514a0208a1b4a5f5aa7
              required:
                - razorpay_order_id
                - razorpay_payment_id
                - razorpay_signature
              properties:
                razorpay_order_id:
                  type: string
                razorpay_payment_id:
                  type: string
                razorpay_signature:
                  type: string
            examples:
              Valid Signature:
                value:
                  razorpay_order_id: order_NoTOqKRmAl3jsl
                  razorpay_payment_id: pay_NoTQyACML59inM
                  razorpay_signature: 9d9111226feb8e169243145dc349a4ebc00d8ef9001e6514a0208a1b4a5f5aa7
      tags:
        - Verify-Payment

tags:
  - name: Product
    description: |
      Product CRUD APIs for the user
    x-displayName: Product
  - name: Purchase
    description: |
      List purchase or list invoice API
    x-displayName: Purchase
  - name: Product-Variant
    description: |
      Product variant APIs for the user
    x-displayName: Product Variant
  - name: Linked-Account
    description: |
      Linked Account APIs for the provider
    x-displayName: Linked Account
  - name: Order
    description: |
      Order is created against a product variant. 
      Using the order id returned in the response, a payment in made on the client side. 
      Order id is generated at Razorpay. The amount displayed in the response is in paise
    x-displayName: Order
  - name: Policies
    description: |
      Consumer policy APIs
    x-displayName: Policies
  - name: Consumer-List-APIs
    description: |
      List resources, providers, purchases, products, product variants
    x-displayName: Consumer list API
  - name: Verify-Payment
    description: |
      Verify Payment made by consumer
    x-displayName: Verify Payment

x-tagGroups:
  - name: Consumer
    description: |
      Catalogue consumer specific apis.
    tags:
      - Order
      - Consumer-List-APIs
      - Verify-Payment
  - name: Provider
    description: |
      Data marketplace specific data provider APIs.
    tags:
      - Product
      - Purchase
      - Product-Variant
      - Linked-Account
  - name: Policies
    description: |
      Policy APIs
    tags:
      - Policies
components:
  securitySchemes:
    authorization:
      type: http
      scheme: bearer
  schemas:
    exampleProductPostBody:
      type: object
      title: Root type for product body
      description: example request for creating product
      properties:
        productId:
          type: string
        resources:
          type: array
          items:
            type: object
            properties:
              resourceIds:
                type: string
                format: uuid
            required:
              resourceIds
      required:
        - productId
        - resources
      example:
        name: flood-sensors
        description: some description for flood-sensors
        price: 50
        duration: 12
        resources:
          - e3e940d9-5743-4229-bd9b-d7c2c80264bf
          - 9c2df357-4d3b-46fd-9d24-3248867eb77e
    successResponseWithObjects:
      type: object
      title: Root Type for standardResponse
      description: example Response for get products request
      properties:
        type:
          type: string
          description: URN type of the response indicating if the query was successful or if any errors have been triggered.
        title:
          description: A human readable title to the message response.
        results:
          type: array
          description: Results which matched the query. This is an array of objects.
          items:
            type: object
            properties:
              productId:
                type: string
                minLength: 1
            required:
              - productId
        detail:
          description : Detail about the response
      required:
        - type
        - title
        - results
        - detail
      example:
        type: 'urn:dx:dmp:Success'
        title: Success
        totalHits: 1
        results:
          - productID: 'the productID formatted as a URN - URN would be based on the APD URL (e.g. urn:datakaveri.org:iisc.ac.in/123qwerty:zxcvb)'
            description: some text description for the product (e.g. a student associated in DataKaveri)
            price: 100
            duration: 12
            resources:
              - pune-env-flood
              - stqc-flood-sensor
    errorResponseWithObjects:
      type: object
      title: Root Type for standardResponse
      description: example Response for get products request
      properties:
        detail:
          type: string
          description: Detailed description of the type or response
        type:
          type: string
          description: URN type of the response indicating if the query was successful or if any errors have been triggered.
        title:
          description: A human readable title to the message response.
      required:
        - type
    errorResponse:
      type: object
      title: Root Type for standardResponse
      description: example Response for get products request
      properties:
        type:
          type: string
          description: URN type of the response indicating if the query was successful or if any errors have been triggered.
        title:
          description: A human readable title to the message response.
        detail:
          type: string
          description: Detailed description of the type or response
      required:
        - type
        - title
        - detail
    successResponseForDeleteProduct:
      type: object
      title: Root Tupe for standard DELETE response
      description: example response for delete product API
      properties:
        type:
          type: string
          description: URN type of the response indicating if the query was successful or if any errors have been triggered.
        title:
          description: A human readable title to the message response.
        detail:
          type: string
          description: Description of the success response.
      required:
        - type
        - title
        - detail
      example:
        type: 'urn:dx:dmp:Success'
        title: Success
        detail: Successfully deleted


    createProductVariantSuccessResponse:
      type: object
      title: Success Response for create product variant
      description: example response for create pv
      properties:
        type:
          type: string
          description: URN type of the response indicating if the query was successful or if any errors have been triggered.
        title:
          description: A human readable title to the message response.
        results:
          type: array
          description: Results which matched the query. This is an array of objects.
          items:
            type: object
            properties:
              productId:
                type: string
                minLength: 1
              productVariantName:
                type: string
                minLength: 1
            required:
              - productId
              - productVariantName
        detail:
          description: Description about the API response
      required:
        - type
        - title
        - results
        - detail
      example:
        {
          "type": "urn:dx:dmp:success",
          "title": "Success",
          "results": [
            {
              "productId": "urn:datakaveri.org:b2c27f3f-2524-4a84-816e-91f9ab23f837:testProduct",
              "variant": "variant1"
            }
          ]
        }

    exampleResponseListPurchases:
      type: object
      title: Root type for purchases API response
      description: example response for list products
      properties:
        type:
          type: string
          description: URN type of the response indicating if the query was successful or if any errors have been triggered.
        title:
          description: A human readable title to the message response.
        results:
          type: array
          description: Results which matched the query. This is an array of objects.
          items:
            type: object
      required:
        - type
        - title
        - results


    notFoundExampleResponseListPurchases:
      type: object
      title: Root type for purchases API response
      description: example response for list products
      properties:
        type:
          type: string
          description: URN type of the response indicating if the query was successful or if any errors have been triggered.
        title:
          description: A human readable title to the message response.
        detail:
          type: string
          description: Error description

      required:
        - type
        - title
        - detail
      example:
        {
          "type": "urn:dx:dmp:resourceNotFound",
          "title": "Not Found",
          "detail": "Purchase info not found"
        }



    exampleVerifyRequestBody:
      type: object
      title: Root type for verify API body
      description: 'example request for verifying if consumer has purchased product, and if the purchase is expired or not'
      properties:
        user:
          $ref: '#/components/schemas/user'
        owner:
          $ref: '#/components/schemas/owner'
        item:
          $ref: '#/components/schemas/item'
      required:
        - user
        - owner
        - item
    user:
      type: object
      title: schemaUser
      description: consumer information
      properties:
        id:
          type: string
          format: uuid
          pattern: '^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$'
          minLength: 36
          maxLength: 36
        name:
          $ref: '#/components/schemas/name'
        email:
          type: string
          pattern: '^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$'
          minLength: 1
      required:
        - id
        - name
        - email
    name:
      type: object
      title: schemaName
      properties:
        firstName:
          type: string
        lastName:
          type: string
      required:
        - firstName
        - lastName
    owner:
      type: object
      title: schemaOwner
      description: provider information
      properties:
        id:
          type: string
          format: uuid
          pattern: '^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$'
          minLength: 36
          maxLength: 36
        name:
          $ref: '#/components/schemas/name'
        email:
          type: string
          pattern: '^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$'
          minLength: 1
      required:
        - id
        - name
        - email
    item:
      type: object
      description: resource information
      properties:
        itemId:
          type: string
          format: uuid
          pattern: '^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$'
          minLength: 36
          maxLength: 36
        itemType:
          type: string
          enum:
            - resource
          minLength: 1
      required:
        - itemId
        - itemType
    verifyPolicySuccessResponse:
      type: object
      title: Verify policy success response
      properties:
        type:
          type: string
          description: URN type of success response
        apdConstraints:
          type: object
          description: Constraints of the policy
      required:
        - type
        - apdConstraints
      example:
        type: 'urn:apd:allow'
        apdConstraints:
          rule: read
          duration: 3600
    verifyPolicyBadRequestResponse:
      type: object
      title: 400 Response for verify policy
      properties:
        type:
          type: string
          description: URN type of error response
        title:
          type: string
          description: title of the error response
        detail:
          type: string
          description: Error message describing the issue
      required:
        - type
        - title
        - detail
      example:
        type: 'urn:dx:dm:invalidPayloadFormat'
        title: Bad Request
        detail: 'Invalid json format in post request [schema mismatch]'

    createProductForbiddenResponse:
      type: object
      title: 403 Forbidden response for product creation
      properties:
        type:
          type: string
          description: URN type of error response
        title:
          type: string
          description: title of the error message
        detail:
          type: string
          description: Description of error message
      required:
        - type
        - title
        - detail
    verifyPolicyForbiddenResponse:
      type: object
      title: 403 Response for verify policy
      properties:
        type:
          type: string
          description: URN type of the error response
        title:
          type: string
          description: title of the error message
        detail:
          type: string
          description: Description of error message
      required:
        - type
        - title
        - detail
      example:
        type: 'urn:apd:Deny'
        title: Forbidden
        detail: No policy exists for the given resource
    getPolicySuccessResponseWithResourceType:
      type: object
      title: get policy for resource item type.
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        results:
          type: array
          items:
            type: object
            properties:
              policyId:
                type: string
              itemId:
                type: string
              accessPolicy:
                type: string
              resourceName:
                type: string
              productVariantId:
                type: string
              resourceServerUrl:
                type: string
              consumer:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: array
                      items:
                        type: object
                        properties:
                          email:
                            type: string
                          name:
                            type: array
                            items:
                              type: object
                              properties:
                                firstName:
                                  type: string
                                lastName:
                                  type: string
                          id:
                            type: string
              provider:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: array
                      items:
                        type: object
                        properties:
                          email:
                            type: string
                          name:
                            type: array
                            items:
                              type: object
                              properties:
                                firstName:
                                  type: string
                                lastName:
                                  type: string
                          id:
                            type: string
              status:
                type: string
                enum:
                  - ACTIVE
                  - DELETED
              expiryAt:
                type: string
              constraints:
                type: object
              updatedAt:
                type: string
                minLength: 1
              createdAt:
                type: string
                minLength: 1
      required:
        - type
        - title
        - results
      example:
        type: 'urn:dx:dmp:success'
        title: Success
        results:
          - policyId: c0ad9c9e-cdb3-4f08-bb35-7843ee8f8092
            resourceId: e81fdfb3-695e-4f1e-8458-ecdb2ca813e5
            resourceServerUrl: rs.iudx.io
            purchaseId: 6eb2428f-6b6f-4b84-a4ef-08d16c312283
            resourceName: surat-itms
            productVariantId: c5c32d00-8edf-418e-9f60-953b76887814
            accessPolicy: SECURE
            status: ACTIVE
            expiryAt: '2025-04-04T04:05:06'
            constraints:
              access: file
            updatedAt: '2024-03-03T05:32:33.586454'
            createdAt: '2023-03-03T05:32:33.586454'
            consumer:
              email: vasanth.rajaraman@datakaveri.org
              name:
                firstName: Vasanth
                lastName: Rajaraman
              id: fd47486b-3497-4248-ac1e-082e4d37a66c
            provider:
              email: provider@gmail.com
              name:
                firstName: Bob
                lastName: Provider
              id: 47a77164-15c8-4311-be69-b4c27be570dd
    Unauthorized:
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: 'urn:dx:dmp:invalidAuthorizationToken'
        title: Not Authorized
        detail: Not Authorized
    policyNotFound:
      type: object
      title: policyNotFound
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: 'urn:dx:dmp:resourceNotFound'
        title: Not Found
        detail: Policy Not Found
    deletePolicy:
      type: object
      title: deletePolicy
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: 'urn:dx:dmp:success'
        title: Success
        detail: Policy deleted successfully
    deletePolicyErrorResponse:
      type: object
      title: deletePolicyErrorResponse
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: 'urn:dx:dmp:badRequest'
        title: Bad Request
        detail: 'Policy could not be deleted, as policy is not ACTIVE'
    deletePolicyNotFoundErrorResponse:
      type: object
      title: deletePolicyNotFoundErrorResponse
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: 'urn:dx:dmp:resourceNotFound'
        title: Not Found
        detail: 'Policy could not be deleted, as it doesn''t exist'
    createPolicy:
      title: createPolicy
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: urn:dx:dmp:success
        title: Success
        detail: Policy created successfully

    createPolicyErrorResponse:
      title: createPolicyErrorResponse
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: urn:dx:dmp:badRequest
        title: Bad Request
        detail: Invalid json format in post request [schema mismatch]

    createLinkedAccount:
      title: createLinkedAccount
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: urn:dx:dmp:success
        title: Success
        detail: Linked account created successfully

    createLinkedAccountErrorResponse:
      title: createLinkedAccountErrorResponse
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: urn:dx:dmp:badRequest
        title: Bad Request
        detail: Linked account could not be as, the legal business name field is required.

    updateLinkedAccount:
      title: updateLinkedAccount
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: urn:dx:dmp:success
        title: Success
        detail: Linked account updated successfully

    updateLinkedAccountErrorResponse:
      title: updateLinkedAccountErrorResponse
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: urn:dx:dmp:success
        title: Bad Request
        detail: Linked account could not be updated as, the pan field is invalid

    updateLinkedAccountNotFoundResponse:
      title: updateLinkedAccountNotFoundResponse
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: urn:dx:dmp:success
        title: Bad Request
        detail: Linked account cannot be updated as, it is not found


    fetchLinkedAccountWithGivenFields:
      title: Linked account with DMP APD stated fields
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        results:
          type: object
          properties:
            accountId:
              type: string
              minLength: 18
              maxLength: 18
            type:
              type: string
              enum: [ route ]
            status:
              type: string
              enum: [ created ]
            email:
              type: string
              pattern: '^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$'
            accountProductId:
              type: string
              minLength: 1
            profile:
              type: object
              properties:
                category:
                  type: string
                  minLength: 1
                subcategory:
                  type: string
                  minLength: 1
                addresses:
                  type: object
                  properties:
                    street1:
                      type: string
                      minLength: 1
                      maxLength: 100
                    street2:
                      type: string
                      minLength: 1
                      maxLength: 100
                    city:
                      type: string
                      minLength: 1
                      maxLength: 100
                    state:
                      type: string
                      minLength: 2
                      maxLength: 32
                    postalCode:
                      type: string
                      minLength: 6
                      maxLength: 6
                    country:
                      type: string
                      minLength: 2
                      maxLength: 64
                  required:
                    - street1
                    - street2
                    - city
                    - state
                    - postalCode
                    - country
              required:
                - category
                - subcategory
                - addresses
            phone:
              type: string
              minLength: 8
              maxLength: 15
            contactName:
              type: string
              minLength: 4
              maxLength: 255
            referenceId:
              type: string
              minLength: 20
              maxLength: 20
            businessType:
              type: string
            legalBusinessName:
              type: string
              minLength: 4
              maxLength: 200
            customerFacingBusinessName:
              type: string
              minLength: 1
              maxLength: 255
            legalInfo:
              type: object
              properties:
                pan:
                  type: string
                  minLength: 10
                  maxLength: 10
                  pattern: '/^[a-zA-z]{5}\d{4}[a-zA-Z]{1}$/'
                gst:
                  type: string
                  minLength: 15
                  maxLength: 15
                  pattern: '/^[0123][0-9][a-z]{5}[0-9]{4}[a-z][0-9][a-z0-9][a-z0-9]$/gi'
            updatedAt:
              type: string
              minLength: 1
            createdAt:
              type: string
              minLength: 1
          required:
            - accountId
            - type
            - status
            - email
            - profile
            - phone
            - referenceId
            - businessType
            - legalBusinessName
            - customerFacingBusinessName
            - accountProductId
            - updatedAt
            - createdAt
      required:
        - type
        - title
        - results
      example:
        type: urn:dx:dmp:success
        title: Success
        results:
          {
            "accountId": "acc_GRWKk7qQsLnDjX",
            "type": "route",
            "status": "created",
            "email": "test.provider@gmail.com",
            "accountProductId": "acc_prd_NhauXCr6VoHFYq",
            "profile": {
              "category": "healthcare",
              "subcategory": "doctors",
              "addresses": {
                "registered": {
                  "street1": "Outer Ring road",
                  "street2": "MG Road",
                  "city": "Bengaluru",
                  "state": "KARNATAKA",
                  "postalCode": "560038",
                  "country": "india"
                }
              }
            },
            "phone": "9100090000",
            "contactName": "Test Name",
            "referenceId": "9db3e89b9db3e89b85e1",
            "businessType": "partnership",
            "legalBusinessName": "Dummy Corp V1",
            "customerFacingBusinessName": "Dummy Corp V1",
            "legalInfo": {
              "pan": "ABACL1234C",
              "gst": "19AABCU9603R1ZM"
            },
            "updatedAt": "2024-03-02T19:50:57.704017",
            "createdAt": "2023-03-02T19:50:57.704017"
          }



    fetchLinkedAccountWithOtherFields:
      title: Linked Account with other fields
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        results:
          type: object
          properties:
            id:
              type: string
              minLength: 18
              maxLength: 18
            type:
              type: string
              enum: [ route ]
            status:
              type: string
              enum: [ created ]
            email:
              type: string
              pattern: '^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$'
            profile:
              type: object
              properties:
                category:
                  type: string
                  minLength: 1
                subcategory:
                  type: string
                  minLength: 1
                addresses:
                  type: object
                  properties:
                    street1:
                      type: string
                      minLength: 1
                      maxLength: 100
                    street2:
                      type: string
                      minLength: 1
                      maxLength: 100
                    city:
                      type: string
                      minLength: 1
                      maxLength: 100
                    state:
                      type: string
                      minLength: 2
                      maxLength: 32
                    postalCode:
                      type: string
                      minLength: 6
                      maxLength: 6
                    country:
                      type: string
                      minLength: 2
                      maxLength: 64
                  required:
                    - street1
                    - street2
                    - city
                    - state
                    - postalCode
                    - country
                operation:
                  type: object
                  properties:
                    street1:
                      type: string
                      minLength: 1
                      maxLength: 100
                    street2:
                      type: string
                      minLength: 1
                      maxLength: 100
                    city:
                      type: string
                      minLength: 1
                      maxLength: 100
                    state:
                      type: string
                      minLength: 2
                      maxLength: 32
                    country:
                      type: string
                      minLength: 2
                      maxLength: 64
                businessModel:
                  type: string
                  nullable: true
              required:
                - category
                - subcategory
                - addresses
            notes:
              type: array
              items:
                type: string
            phone:
              type: string
              minLength: 8
              maxLength: 15
            contactName:
              type: string
              minLength: 4
              maxLength: 255
            referenceId:
              type: string
              minLength: 20
              maxLength: 20
            businessType:
              type: string
            legalBusinessName:
              type: string
              minLength: 4
              maxLength: 200
            customerFacingBusinessName:
              type: string
              minLength: 1
              maxLength: 255
            legalInfo:
              type: object
              properties:
                pan:
                  type: string
                  minLength: 10
                  maxLength: 10
                  pattern: '/^[a-zA-z]{5}\d{4}[a-zA-Z]{1}$/'
                gst:
                  type: string
                  minLength: 15
                  maxLength: 15
                  pattern: '/^[0123][0-9][a-z]{5}[0-9]{4}[a-z][0-9][a-z0-9][a-z0-9]$/gi'
              required:
                - pan
                - gst
            apps:
              type: object
              properties:
                websites:
                  type: array
                  items:
                    type: string
                android:
                  type: array
                  items:
                    type: object
                    properties:
                      url:
                        type: string
                        nullable: true
                      name:
                        type: string
                        nullable: true
                ios:
                  type: array
                  items:
                    type: object
                    properties:
                      url:
                        type: string
                        nullable: true
                      name:
                        type: string
                        nullable: true
            brand:
              type: object
              properties:
                color:
                  type: string
                  nullable: true
            contactInfo:
              type: object
              properties:
                chargeback:
                  type: object
                  properties:
                    email:
                      type: string
                      nullable: true
                    phone:
                      type: string
                      nullable: true
                    policyUrl:
                      type: string
                      nullable: true

                refund:
                  type: object
                  properties:
                    email:
                      type: string
                      nullable: true
                    phone:
                      type: string
                      nullable: true
                    policyUrl:
                      type: string
                      nullable: true
                support:
                  type: object
                  properties:
                    email:
                      type: string
                      nullable: true
                    phone:
                      type: string
                      nullable: true
                    policyUrl:
                      type: string
                      nullable: true
          required:
            - id
            - type
            - status
            - email
            - profile
            - notes
            - phone
            - contactName
            - referenceId
            - businessType
            - legalBusinessName
            - customerFacingBusinessName
            - legalInfo
      required:
        - type
        - title
        - results
      example:
        type: urn:dx:dmp:success
        title: Success
        results:
          {
            "id": "acc_NBK8KJeLl7fvpC",
            "type": "route",
            "status": "created",
            "email": "test.provider@gmail.com",
            "profile": {
              "category": "healthcare",
              "subcategory": "doctors",
              "addresses": {
                "registered": {
                  "street1": "Outer Ring road",
                  "street2": "MG Road",
                  "city": "Bengaluru",
                  "state": "KARNATAKA",
                  "postalCode": "560038",
                  "country": "india"
                },
                "operation": {
                  "street1": "507, Koramangala 6th block",
                  "street2": "Kormanagala",
                  "city": "Bengaluru",
                  "state": "KARNATAKA",
                  "country": "IN",
                }
              },
              "businessModel": null
            },
            "phone": "9100090000",
            "contactName": "Test Name",
            "referenceId": "12345678912345678912",
            "businessType": "partnership",
            "legalBusinessName": "Dummy Corp V2",
            "customerFacingBusinessName": "Some Other Corp",
            "legalInfo": {
              "pan": "ABACL1234C",
              "gst": "19AABCU9603R1ZM"
            },
            "apps": {
              "websites": [

              ],
              "android": [
                {
                  "url": null,
                  "name": null
                }
              ],
              "ios": [
                {
                  "url": null,
                  "name": null
                }
              ]
            },
            "brand": {
              "color": null
            },
            "contactInfo": {
              "chargeback": {
                "email": null,
                "phone": null,
                "policyUrl": null
              },
              "refund": {
                "email": null,
                "phone": null,
                "policyUrl": null
              },
              "support": {
                "email": null,
                "phone": null,
                "policyUrl": null
              }
            }
          }

    fetchLinkedAccountNotFound:
      title: fetchLinkedAccountNotFound
      type: object
      properties:
        type:
          type: string
          minLength: 1
        title:
          type: string
          minLength: 1
        detail:
          type: string
          minLength: 1
      required:
        - type
        - title
        - detail
      example:
        type: urn:dx:dmp:resourceNotFound
        title: Not Found
        detail: Linked account cannot be fetched as, it is not found




